<!-- TODO reuse waa-module.html -->
	<!--Handlebars.js template for analyser (oscilloscope) module-->
	<script id="analyserTemplate" type="text/x-handlebars-template">
		<div class="module {{moduleCssClass}}">
			<span class="dataContainer"></span>

			<header>
				<div style="margin: 0 0 5px 0;">{{moduleName}}</div>
			</header>

			{{#if hasStartButton}}
			<fieldset>
				<button>Start</button>
			</fieldset>
			{{/if}}
			
			{{!specific for analyser: canvas}}
			
			{{#if hasOscilloscope}}
			<span class="oscilloscopeCanvasContainer">
				<canvas></canvas>
			</span>
			{{/if}}
			
			{{#if hasFsa}}
			<span class="freqSpectrumAnalyserCanvasContainer">
				<canvas></canvas>
			</span>
			{{/if}}

			<fieldset class="connectors">
				<legend>Connectors</legend>
				{{#if hasAudioIn}}
					<div><div>Audio<br/>In</div><div><span class="patchHole " data-patch-type="audioIn">&nbsp;</span></div></div>
				{{/if}}

				{{#if hasAudioOut}}
					<div><div>Audio<br/>Out</div><div><span class="patchHole " data-patch-type="audioOut">&nbsp;</span></div></div>
				{{/if}}

				{{#if hasTriggerIn}}
					<div><div>Trigger<br/>In</div><div><span class="patchHole " data-patch-type="triggerIn">&nbsp;</span></div></div>
				{{/if}}

				{{#if hasTriggerOut}}
					<div><div>Trigger<br/>Out</div><div><span class="patchHole " data-patch-type="triggerOut">&nbsp;</span></div></div>
				{{/if}}

				{{#if hasControlIn}}
					<div><div>Control<br/>In</div><div><span class="patchHole " data-patch-type="controlIn">&nbsp;</span></div></div>
				{{/if}}

				{{#if hasControlOut}}
					<div><div>Control<br/>Out</div><div><span class="patchHole " data-patch-type="controlOut">&nbsp;</span></div></div>
				{{/if}}
			</fieldset>

		</div>
	</script>

<script>
	// importDoc references this import's document
	var importDoc = document.currentScript.ownerDocument;

	// mainDoc references the main document (the page that's importing us)
	var mainDoc = document;

	// Grab the element from this import, clone it,
	// and append it to the importing document.
	var el = importDoc.querySelector('#analyserTemplate');
	mainDoc.body.appendChild(el.cloneNode(true));
</script>
